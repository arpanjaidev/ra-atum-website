<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallet – RA Atum</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      background: #0e1018;
      color: #fff;
      font-family: 'Share Tech Mono', monospace;
      margin: 0;
      min-height: 100vh;
      padding: 0;
    }
    .wallet-headline {
      text-align: center;
      margin-top: 38px;
      margin-bottom: 35px;
      font-size: 1.18em;
      font-family: 'Share Tech Mono', monospace;
      font-weight: bold;
      text-transform: uppercase;
      background: linear-gradient(90deg,#fff 8%,#00b4fa 60%,#23e6ff 98%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 18px #22213866,0 0 8px #00b4fa88,0 0 18px #00b4fa99;
      filter: brightness(1.15) drop-shadow(0 0 3px #00e6ff99);
      letter-spacing: 1.1px;
      min-height: 1.7em;
    }
    .wallet-main-flex {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 44px;
      padding: 16px 0 0 0;
      max-width: 980px;
      margin: 0 auto;
    }
    .ra-logo-big {
      width: 168px;
      height: 168px;
      max-width: 35vw;
      border-radius: 35px;
      object-fit: contain;
      background: #191b2a;
      box-shadow: 0 8px 48px #00b4fa88, 0 0 0 7px #191a2477;
      border: 3px solid #00b4fa44;
      margin-top: 8px;
      margin-left: 8px;
      display: block;
      transition: transform .22s;
    }
    .ra-logo-big:hover {
      transform: scale(1.04) rotate(-2deg);
      box-shadow: 0 18px 68px #00b4faaa, 0 0 0 12px #191a24bb;
    }
    .wallet-container {
      background: #181a1b;
      border-radius: 18px;
      box-shadow: 0 8px 32px #00b4fa33;
      width: 320px;
      min-width: 230px;
      margin: 20px 0 0 0;
      padding: 30px 22px 24px 22px;
      border: 2.5px solid #00b4fa;
      position: relative;
      z-index: 2;
      font-family: 'Share Tech Mono', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .wallet-title {
      font-size: 1.33rem;
      letter-spacing: 1.4px;
      font-weight: bold;
      margin-bottom: 16px;
      background: linear-gradient(90deg, #fff 8%, #00b4fa 60%, #23e6ff 98%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 18px #22213866, 0 0 8px #00b4fa88, 0 0 18px #00b4fa99;
      filter: brightness(1.16) drop-shadow(0 0 3px #00e6ff99);
      text-transform: uppercase;
      text-align: center;
      width: 100%;
    }
    .wallet-info-row {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin: 13px 0;
      font-size: 1.04rem;
      font-weight: bold;
      color: #e7d7b6;
      border-bottom: 1px solid #202f38;
      padding-bottom: 5px;
    }
    .wallet-info-row:last-child { border-bottom: none; }
    .wallet-address {
      margin: 8px 0 17px 0;
      font-size: 0.98rem;
      color: #00b4fa;
      word-break: break-all;
      letter-spacing: 0.6px;
      min-height: 20px;
      background: #23243b;
      border-radius: 7px;
      padding: 6px 10px;
      font-weight: bold;
      display: inline-block;
      box-shadow: 0 2px 16px #00b4fa33;
      border: 1.5px solid #00b4fa44;
      font-family: 'Share Tech Mono', monospace;
      text-align: center;
      width: 100%;
      align-self: center;
    }
    .wallet-btn-row {
      display: flex;
      gap: 10px;
      width: 100%;
      justify-content: center;
      margin-top: 8px;
      margin-bottom: 16px;
    }
    .wallet-connect-btn, .wallet-buy-btn, .wallet-home-btn {
      background: linear-gradient(90deg, #00b4fa 0%, #00ffd0 100%);
      color: #181a1b;
      border: none;
      border-radius: 9px;
      padding: 10px 22px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 18px #00b4fa33;
      transition: background .17s, color .17s, transform .12s;
      letter-spacing: 1px;
      font-family: 'Share Tech Mono', monospace;
      opacity: 0.97;
      outline: none;
      min-width: 110px;
      max-width: 46%;
      display: inline-block;
      text-align: center;
    }
    .wallet-connect-btn:hover, .wallet-buy-btn:hover, .wallet-home-btn:hover {
      background: #e7d7b6; color: #002a37; transform: scale(1.045);
    }
    .wallet-msg { margin: 4px 0 0 0; min-height: 22px; font-size: 1rem; align-self: center;}
    @media (max-width: 850px) {
      .wallet-main-flex { flex-direction: column; align-items: center; gap: 18px; }
      .ra-logo-big { margin: 0 auto 14px auto; }
      .wallet-container { align-items: center; width: 98vw; max-width: 340px; }
      .wallet-title, .wallet-msg, .wallet-buy-btn, .wallet-connect-btn, .wallet-address, .wallet-info-row { align-self: center !important; }
      .wallet-btn-row { justify-content: center; }
    }
    @media (max-width: 480px) {
      .wallet-container { padding: 12px 3vw 12px 3vw; }
      .wallet-title { font-size: 1rem; }
      .ra-logo-big { width: 95px; height: 95px;}
    }
  </style>
</head>
<body>
  <div class="wallet-headline" id="wallet-typing-shine"></div>
  <div class="wallet-main-flex">
    <img src="RA-ATUM-LOGO.png" alt="RA Atum Logo" class="ra-logo-big" />
    <div class="wallet-container">
      <div class="wallet-title"><i class="fas fa-wallet"></i> Wallet Overview</div>
      <div id="wallet-address" class="wallet-address">Not connected</div>
      <div class="wallet-info-row">
        <span>Token Balance</span>
        <span id="token-balance">–</span>
      </div>
      <div class="wallet-info-row">
        <span>Referral Earnings</span>
        <span id="referral-earnings">–</span>
      </div>
      <div class="wallet-btn-row">
        <button class="wallet-connect-btn" id="connect-wallet-btn"><i class="fa-solid fa-link"></i> Connect Wallet</button>
        <button class="wallet-buy-btn" onclick="window.location.href='index.html#buy-section'"><i class="fas fa-bolt"></i> Buy RA Atum</button>
        <button class="wallet-home-btn" onclick="window.location.href='index.html'"><i class="fas fa-arrow-left"></i> Back to Home</button>
      </div>
      <div class="wallet-msg" id="wallet-msg"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    // Typing effect headline
    const walletTypingText = "Join RA Atum to shape the future of blockchain-powered kindness.";
    const walletTypingElem = document.getElementById("wallet-typing-shine");
    let wIndex = 0, wTypingForward = true, wBlinkOn = true;
    function typeWalletLine() {
      if (!walletTypingElem) return;
      if (wTypingForward) {
        if (wIndex <= walletTypingText.length) {
          walletTypingElem.innerHTML = walletTypingText.substring(0, wIndex) + '<span style="color:#00b4fa;font-weight:bold;font-size:1.15em;">' + (wBlinkOn ? "|" : "&nbsp;") + '</span>';
          wIndex++;
          setTimeout(typeWalletLine, 37);
        } else {
          wTypingForward = false;
          setTimeout(typeWalletLine, 1300);
        }
      } else {
        if (wIndex >= 0) {
          walletTypingElem.innerHTML = walletTypingText.substring(0, wIndex) + '<span style="color:#00b4fa;font-weight:bold;font-size:1.15em;">' + (wBlinkOn ? "|" : "&nbsp;") + '</span>';
          wIndex--;
          setTimeout(typeWalletLine, 16);
        } else {
          wTypingForward = true;
          setTimeout(typeWalletLine, 750);
        }
      }
    }
    setInterval(function() { wBlinkOn = !wBlinkOn; }, 410);
    typeWalletLine();

    // Wallet connect logic
    const tokenAddress = "0xcE06aDbB070c2f0d90Ba109E77c0c2Ff83F9Ff3A";
    const erc20ABI = [
      "function balanceOf(address owner) view returns (uint256)",
      "function decimals() view returns (uint8)"
    ];
    document.getElementById('connect-wallet-btn').onclick = async function() {
      const walletMsg = document.getElementById('wallet-msg');
      walletMsg.innerText = "Connecting...";
      if (window.ethereum && /MetaMask/i.test(window.ethereum.isMetaMask ? 'MetaMask' : navigator.userAgent)) {
        try {
          const provider = new ethers.providers.Web3Provider(window.ethereum, "any");
          await provider.send("eth_requestAccounts", []);
          const signer = provider.getSigner();
          const address = await signer.getAddress();
          document.getElementById('wallet-address').innerText = "Address: " + address.slice(0,7) + "..." + address.slice(-4);
          walletMsg.innerText = "✅ Wallet connected!";
          // Fetch and display actual token balance
          const tokenContract = new ethers.Contract(tokenAddress, erc20ABI, provider);
          const [rawBalance, decimals] = await Promise.all([
            tokenContract.balanceOf(address),
            tokenContract.decimals()
          ]);
          const balance = ethers.utils.formatUnits(rawBalance, decimals);
          document.getElementById('token-balance').innerText = balance;
          // Dummy value for referral earnings (customize as needed)
          document.getElementById('referral-earnings').innerText = "0.00";
        } catch (err) {
          walletMsg.innerText = "❌ Wallet connection failed.";
          document.getElementById('wallet-address').innerText = "Not connected";
          document.getElementById('token-balance').innerText = "–";
          document.getElementById('referral-earnings').innerText = "–";
        }
      } else {
        walletMsg.innerText = "";
        window.location.href = "https://metamask.app.link/dapp/ra-wallet-dapp.vercel.app";
      }
    };
  </script>
</body>
</html>
